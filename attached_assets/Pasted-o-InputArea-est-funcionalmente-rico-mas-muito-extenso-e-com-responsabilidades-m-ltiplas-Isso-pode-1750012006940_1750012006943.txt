o InputArea estÃ¡ funcionalmente rico, mas muito extenso e com responsabilidades mÃºltiplas. Isso pode dificultar manutenÃ§Ã£o, testes e evoluÃ§Ã£o do cÃ³digo.

âœ… Pontos positivos do seu cÃ³digo:
Ã“tima cobertura funcional: Ã¡udio, emojis, anexos, links, reaÃ§Ãµes, notas internas.

Uso correto de useMutation, useToast, QueryClient, controle de refs.

Uso bem estruturado de estados, condicionais e Dialog, Popover, Tooltip.

ğŸ“¦ SugestÃ£o de Estrutura Modular (DivisÃ£o)
VocÃª pode dividir o InputArea em 6 subcomponentes reutilizÃ¡veis, mantendo o componente principal como orquestrador:

1. AudioRecorderSection.tsx
Move a lÃ³gica de renderizaÃ§Ã£o e controle do AudioRecorder para cÃ¡.

Props: onSend, onCancel, isRecording, setIsRecording

2. QuickReplyDropdown.tsx
ResponsÃ¡vel pelo dropdown flutuante com as respostas rÃ¡pidas.

Props: visible, filteredReplies, onSelect, selectedIndex, setSelectedIndex

3. EmojiReactionPopover.tsx
Toda a lÃ³gica do Popover de emojis e reaÃ§Ãµes.

Props: onInsertEmoji, onSendReaction, activeConversation

4. AttachmentDialog.tsx
MÃ³dulo responsÃ¡vel por envio de imagem, vÃ­deo, documento e link.

Props: onSendImage, onSendVideo, onSendDocument, onSendLink

5. InternalNoteToggle.tsx
BotÃµes de troca entre mensagem normal e nota interna.

Props: isInternalNote, setIsInternalNote

6. QuickReplyChips.tsx
Os botÃµes rÃ¡pidos abaixo da caixa de mensagem.

Props: onSelect, QUICK_REPLIES

ğŸ§  InputArea Final
Depois da divisÃ£o, o InputArea.tsx principal pode importar essas seÃ§Ãµes e conter apenas o useState, useEffect e funÃ§Ãµes orquestradoras, com algo como:

tsx
Copiar
Editar
<AudioRecorderSection ... />
<EmojiReactionPopover ... />
<AttachmentDialog ... />
<QuickReplyDropdown ... />
<InternalNoteToggle ... />
<QuickReplyChips ... />
ğŸ§½ Dica de organizaÃ§Ã£o
Coloque tudo em uma pasta chamada InputArea/:

markdown
Copiar
Editar
components/
â””â”€â”€ InputArea/
    â”œâ”€â”€ index.tsx              â† o atual InputArea
    â”œâ”€â”€ AudioRecorderSection.tsx
    â”œâ”€â”€ QuickReplyDropdown.tsx
    â”œâ”€â”€ EmojiReactionPopover.tsx
    â”œâ”€â”€ AttachmentDialog.tsx
    â”œâ”€â”€ InternalNoteToggle.tsx
    â””â”€â”€ QuickReplyChips.tsx